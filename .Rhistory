df <- read_dta(file = "RI1999.sav")
library(dplyr)
library(haven)
library(plyr)
library(tidyr)
df <- read_dta(file = "RI1999.sav")
df <- read_sav(file = "RI1999.sav")
View(df)
df1999 <- read_sav(file = "RI1999.sav")
df1999 <- read_sav(file = "RI1999.sav")
df2000 <- read_sav(file = "RI2000.sav")
df2001 <- read_sav(file = "RII2001.sav")
df1999 <- read_sav(file = "RI1999.sav")
df2000 <- read_sav(file = "RI2000.sav")
df2001 <- read_sav(file = "RII2001.sav")
match(rownames(df1999),rownames(df2000))
merge(df2000,df1999,by="row.names",all.x=TRUE)
df1920 <- rbind(df1999,df2000)
table(df1999$period, df2000$period)
View(df2001)
table(df2001$edu)
str(df2001$edu)
df1999 %>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df19
View(df19)
df2000 %>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
View(df20)
View(df2000)
df2000 %>%
filter(id == df2001$id)%>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
View(df20)
df1999 %>%
filter(id == df2001$id)%>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df19
View(df2001)
View(df2000)
df2000 %>%
filter(id == df2001$id)
df2000 %>%
filter(id %in% df2001$id)
df2000 %>%
filter(id %in% df2001$id)%>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
df1999 %>%
filter(id %in% df2001$id)%>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df19
View(df19)
df2000 %>%
filter(id !%in% df2001$id)%>%
df2000 %>%
filter(id !=%in% df2001$id)%>%
df2000 %>%
filter(id %in% df2001$id)%>%
select(grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
View(df2001)
View(df20)
df2000 %>%
filter(id %in% df2001$id)%>%
select(id, grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
sum(is.na(df20))
sum(is.na(df20$grad))
sum(is.na(df2001$grad))
df20$all
View(df20)
df2001$grad_y <- df20$grad_y
View(df2001)
if(df2001[[i]]$id %in% df20[[i]]$id){
df2001$grad_y <- df20$grad_y
}
if(df2001$id %in% df20$id){
df2001$grad_y <- df20$grad_y
}
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
df2001$id %in% df20$id
for (i in nrow(df2001)){
if ((df2001[[i]]$id %in% df20[[i]]$id)==TRUE){
df2001[[i]]$grad_y <- df20[[i]]$grad_y
df2001[[i]]$grad <- df20[[i]]$grad
df2001[[i]]$fwork_indust <- df20[[i]]$fwork_indust
df2001[[i]]$fwork_occu <- df20[[i]]$fwork_occu
df2001[[i]]$fworkfor <- df20[[i]]$fworkfor
df2001[[i]]$fwage <- df20[[i]]$fwage
df2001[[i]]$Sworkers <- df20[[i]]$Sworkers
df2001[[i]]$Sworkplace <- df20[[i]]$Sworkplace
}
}
for (i in nrow(df2001)){
if ((df2001[[i]]$id %in% df20[[i]]$id)==TRUE){
df2001[[i]]$grad_y <- df20[[i]]$grad_y
View(df2001)
for (i in 1:nrow(df2001)){
if ((df2001[[i]]$id %in% df20[[i]]$id)==TRUE){
df2001[[i]]$grad_y <- df20[[i]]$grad_y
df2001[[i]]$grad <- df20[[i]]$grad
df2001[[i]]$fwork_indust <- df20[[i]]$fwork_indust
df2001[[i]]$fwork_occu <- df20[[i]]$fwork_occu
df2001[[i]]$fworkfor <- df20[[i]]$fworkfor
df2001[[i]]$fwage <- df20[[i]]$fwage
df2001[[i]]$Sworkers <- df20[[i]]$Sworkers
df2001[[i]]$Sworkplace <- df20[[i]]$Sworkplace
}
}
View(df2001)
View(df2001)
for (i in 1:nrow(df2001)){
if ((df2001[[i]]$id %in% df20[[i]]$id)==TRUE){
df2001[[i]]$grad_y <- df20[[i]]$grad_y
df2001[[i]]$grad <- df20[[i]]$grad
df2001[[i]]$fwork_indust <- df20[[i]]$fwork_indust
df2001[[i]]$fwork_occu <- df20[[i]]$fwork_occu
df2001[[i]]$fworkfor <- df20[[i]]$fworkfor
df2001[[i]]$fwage <- df20[[i]]$fwage
df2001[[i]]$Sworkers <- df20[[i]]$Sworkers
df2001[[i]]$Sworkplace <- df20[[i]]$Sworkplace
}
}
for (i in 1:nrow(df2001)){
if ((df2001[[i]]$id %in% df20[[i]]$id)==TRUE){
df2001[[i]]$grad_y <- df20[[i]]$grad_y}}
View(df2001)
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
View(df2001)
View(df2001)
if((df2001$id %in% df20$id)==TRUE){
df2001$grad_y <- df20$grad_y
}
library(dplyr)
library(haven)
library(plyr)
library(tidyr)
df1999 <- read_sav(file = "RI1999.sav")
df2000 <- read_sav(file = "RI2000.sav")
df2001 <- read_sav(file = "RII2001.sav")
[match(rownames(df1999),rownames(df2000))]
df2000 %>%
filter(id %in% df2001$id)%>%
select(id, grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
df2001 %>%
filter(id == df20$id) %>%
grad_y <- df20$grad_y
full_join(df1999, df2000, by = "id")
full_join(df1999, df2000, all.x=TRUE)
full_join(df1999, df2000, all.y=TRUE)
table(period)
full_join(df1999, df2000, all.y=TRUE)->df1920
table(df1920$period)
df2001$period
df2001$grad_y <-1
View(df2001)
df2001$id %in% df20$id
(df2001$id %in% df20$id)=TRUE
(df2001$id %in% df20$id)==TRUE
if (df2001$id %in% df20$id){
df2001$grad_y <- df20$grad_y
}
df2001 %>%
filter(id == df20$id)->df21
df2001 %>%
filter(id %in% df20$id)->df21
df2001 <- read_sav(file = "RII2001.sav")
df2001 %>%
filter(id %in% df20$id)->df21
df21$grad_y <- df20$grad_y
function (x,y,z){
y$x <- z$x
}
TF<- function (x,y,z){
y$x <- z$x
}
TF(grad_y,df21,df20)
TF(grad,df21,df20)
library(dplyr)
library(haven)
library(plyr)
library(tidyr)
df1999 <- read_sav(file = "RI1999.sav")
df2000 <- read_sav(file = "RI2000.sav")
df2001 <- read_sav(file = "RII2001.sav")
full_join(df1999, df2000, df2001, all.z=TRUE)->df1920
df2000 %>%
filter(id %in% df2001$id)%>%
select(id, grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
name<-c("id","grad_y","grad","fwork_indust","fwork_occu","fworkfor","fwage","Sworkers","Sworkplace")
merge(df2001,df20,by="",all.x=TRUE)
merge(df2001,df20,by=name,all.x=TRUE)->df21
authors <- data.frame(
surname = c("Tukey", "Venables", "Tierney", "Ripley", "McNeil"),
nationality = c("US", "Australia", "US", "UK", "Australia"),
retired = c("yes", rep("no", 4)))
books <- data.frame(
name = c("Tukey", "Venables", "Tierney", "Ripley", "Ripley", "McNeil"),
title = c("Exploratory Data Analysis",
"Modern Applied Statistics ...",
"LISP-STAT",
"Spatial Statistics", "Stochastic Simulation",
"Interactive Data Analysis"),
other.author = c(NA, "Ripley", NA, NA, NA, NA))
merge(authors, books, by.x="surname", by.y="name")
rbind.fill(df2000,df2001)->df21
View(df21)
?rbind.fill
merge(df2001,df20,by=id,all.x=TRUE)->df21
merge(df2001,df20,by="id",all.x=TRUE)->df21
View(df21)
df21$indust.x == df21$indust.y
sum(which(df21$indust.x==0))
table(which(df21$indust.x==0))
table(df21$indust.x)
table(df21$indust.y)
View(df21)
View(df20)
str(df21$indust.x)
df2001 <- read_sav(file = "RII2001.sav")
df2000 %>%
filter(id %in% df2001$id)%>%
select(id, grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, Sbirth_y, Sedu, Sindust, Soccu,
Sworkfor, Sworkers, Sworkplace)->df20
merge(df2001,df20,by="id",all.x=TRUE)->df21
df21$indust<-ifelse(df21$c01a=1&df21$c01b=1,
df21$indust<-ifelse(df21$c01a==1&df21$c01b==1,
df21$indust.y,df21$indust.x)
View(df21)
df2001 <- read_sav(file = "RII2001.sav")
merge(df2001,df20,by="id",all.x=TRUE)->df21
table(df21$marry)
table(df2000$marry)
str(df2000$marry)
table(df21$marry)
sum(is.na(df2000$marry))
sum(is.na(df21$marry))
df2000 %>%
filter(id %in% df2001$id)%>%
select(id, grad_y, grad, indust, occu, workfor, workers, workplace, fwork_indust, fwork_occu, fworkfor, fwage, marry, Sbirth_y, Sedu, Sindust, Soccu, Sworkfor, Sworkers, Sworkplace)->df20
merge(df2001,df20,by="id",all.x=TRUE)->df21
df21$marry.x==NA
df21$marry <- ifelse((is.na(df21$marry.x)), df21$marry.y, df21$marry.x)
View(df21)
View(df21)
table(df21$marry)
table(df21$marry.y)
View(df21)
which(df21$c21b==c(1,2,4))
which(df21$c21b %in% c(1,2,4))
df21$Sbirth_y<-ifelse(
df21$c21a==1 | df21$c21b %in% c(2,4),
df21$Sbirth_y.y,df21$Sbirth_y.x)
View(df21)
table(dfd21$Sbirth_y)
table(df21$Sbirth_y)
is.na(df2000$Sbirth_y)
sum(is.na(df2000$Sbirth_y))
sum(is.na(df21$Sbirth_y))
sum(is.na(df2000$marry))
sum(is.na(df21$marry))
sum(is.na(df21$Sbirth_y.x))
sum(is.na(df21$Sbirth_y.y))
table(df2000$Sbirth_y)
table(df2000$marry)
sum(df20000$marry==0)
sum(df2000$marry==0)
sum(is.na(df2000$Sbirth_y))
df21$Sbirth_y <- ifelse((is.na(df21$Sbirth_y.x)), df21$Sbirth_y.y, df21$Sbirth_y.x)
sum(is.na(df21$Sbirth_y.y))
sum(is.na(df2000$Sbirth_y))
length(df21$c21b %in% c(2,4))
sum(is.na(df2000$Sbirth_y))
sum(is.na(df21$Sbirth_y.y))
